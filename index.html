
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;python&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-6bc17265.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#activities" class="toc-h1 toc-link" data-title="Activities">Activities</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#actions" class="toc-h2 toc-link" data-title="Actions">Actions</a>
                  </li>
                  <li>
                    <a href="#request-for-action" class="toc-h2 toc-link" data-title="Request for action">Request for action</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the Nuland API! You can use our API to access Nuland API endpoints, which can get information on our blockchain data.</p>

<p>Nuland platform uses <a href="https://exonum.com/developers">Exonum</a> - open-source framework for the Rust programming language - in it&#39;s backend side. Light-clients can easily operate Nuland API with any modern client-side framework for Javascript. </p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>Generating signin key pair:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">Exonum</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'exonum-client'</span><span class="p">);</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">keyPair</span> <span class="o">=</span> <span class="nx">Exonum</span><span class="p">.</span><span class="nx">keyPair</span><span class="p">;</span>
</code></pre>
<blockquote>
<p>Sending transaction to create new account</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">makeAndSendCreateAccountTx</span><span class="p">(</span><span class="nx">username</span><span class="p">,</span> <span class="nx">keyPair</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>JSON response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tx_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cb2f450864cceab1632939e35554d20cc8d9f38e688fa1e68a4b408f90b1f978"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Check balance:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">getBalanceByPublicKey</span><span class="p">(</span><span class="nx">keyPair</span><span class="p">.</span><span class="nx">publicKey</span><span class="p">);</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre>
<p>Nuland uses a signing key pair to allow access to the blockchain. </p>

<p>To be able to create any action using Nuland platform one should sign any transaction with this key pair.</p>

<aside class="notice">
To generate a new key pair using [Exonum](https://exonum.com/doc/version/0.12/get-started/light-client/#generate-a-signing-key-pair)
</aside>
<h1 id='activities'>Activities</h1>
<p>Nuland has several activities which can be spread among the cyber and physics realities.</p>
<h2 id='actions'>Actions</h2>
<p><code>GET http://nuland.io/api/</code></p>
<pre class="highlight python tab-python"><code>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/kittens"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">get_reports_sorted</span><span class="p">();</span>
<span class="c1">// Returns the array of all actions</span>
</code></pre>
<blockquote>
<p>Common action array structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"feedback_request_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Array(32)"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"pub_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Array(32)"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plastic"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"binary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/example.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"geohash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"srbfhqcv8hsh"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-09-25T13:46:43.886186720Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"pub_key"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Array(32)"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"report_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Array(32)"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"report_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"General"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plastic trash"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">Action</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">feedback_request_id</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">corresponds</span><span class="w"> </span><span class="err">to</span><span class="w">
</span><span class="err">//</span><span class="w"> </span><span class="err">request</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">action</span><span class="w"> </span><span class="err">so</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">action</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">response</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">request.</span><span class="w">
</span></code></pre>
<blockquote>
<p>Create and send action:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="nx">makeAndSendTxReport</span><span class="p">(</span>
  <span class="s1">'title'</span><span class="p">,</span>
  <span class="s1">'action_type'</span><span class="p">,</span>
  <span class="s1">'image_url'</span><span class="p">,</span>
  <span class="s1">'description'</span><span class="p">,</span>
  <span class="s1">'geohash'</span><span class="p">,</span>
  <span class="nx">Hash_zeros</span><span class="p">,</span>
  <span class="nx">keyPair</span>
<span class="p">);</span>

<span class="c1">// Hash_zeros - is a hash of request for action id, </span>
<span class="c1">// if action responses for request one should use id </span>
<span class="c1">// of that request, if it's not and is the simple action, </span>
<span class="c1">// then Hash_zeros === 0000000000000000000000000000000000000000000000000000000000000000</span>
</code></pre>
<p>Actions let users to send any data about what is happening in particular area. User describes his intention in comment section, attaches the image and coordinates of the exact location and send to the Nuland blockchain.</p>

<p>Action consists of title, type, url to image, description, geohash of the coordinates and hash of request if it is a response action. <a href="http://geohash.org/">Geohash</a> is a public domain geocode system, which encodes a geographic location into a short string of letters and digits. </p>

<aside class="notice">
Javascript library for geohash encoding 
[latlon-geohash](https://github.com/chrisveness/latlon-geohash)

</aside>
<h2 id='request-for-action'>Request for action</h2>
<p><code>GET http://nuland.io/api/</code></p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">get_feedback_requests</span><span class="p">();</span>

<span class="c1">// Returns an array of requests for action</span>

</code></pre>
<blockquote>
<p>Common request for action array structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"feedback_request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"area"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"geohash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ud9d5fjqfehf"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"radius"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Take a picture of Anton "</span><span class="p">,</span><span class="w">
      </span><span class="s2">"end_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1572446140</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/example.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"reward"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"start_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1572446140</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Take a picture of Anton"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Array(32)"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
